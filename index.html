<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="å¿«é€Ÿç”Ÿæˆæ°¸ä¹…çŸ­URLï¼Œä¾¿äºåˆ†äº«å’Œè·Ÿè¸ªæ‚¨çš„é“¾æ¥" />
  <meta name="keywords" content="çŸ­é“¾, çŸ­é“¾æ¥, URL è½¬æ¢, çŸ­ç½‘å€, çŸ­é“¾ç”Ÿæˆ" />
  <meta name="author" content="yoyou.org" />
  <meta property="og:title" content="çŸ­é“¾ç”Ÿæˆä¸è½¬åŒ–å·¥å…·" />
  <meta property="og:description" content="å¿«é€Ÿç”ŸæˆçŸ­é“¾æ¥ï¼Œä¾¿äºåˆ†äº«å’Œè¿½è¸ª" />
  <meta property="og:image" content="asset/img/favicon.png" />
  <meta property="og:url" content="https://www.yoyou.org" />
  <meta name="twitter:card" content="summary_large_image" />
  <title>çŸ­é“¾ç”Ÿæˆä¸è½¬åŒ–å·¥å…· - å¿«é€Ÿé«˜æ•ˆçš„URLç¼©çŸ­æœåŠ¡</title>
  <link rel="icon" href="asset/img/favicon.png" alt="çŸ­é“¾ç”Ÿæˆå·¥å…·å›¾æ ‡" />
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2421834653870504"
    crossorigin="anonymous"></script>
  <script async src="https://busuanzi.sukap.cn/busuanzi.pure.mini.js"></script>
  <link rel="stylesheet" href="asset/css/style.css" />
</head>

<body>
  <header>
    <h6>
      <div>yoyou.org çŸ­é“¾æ¥ç”Ÿæˆå·¥å…·</div>
      <div >å…¬ä¼—å·ï¼š<span class="sub-title">ã€ç§‘å¦™çŸ¥è¡Œã€‘</span></div>
    </h1>
  </header>
  <main x-data="app" x-cloak>
    <p x-show.transition.opacity="alert" :class="alert?.type" x-text="alert?.message"></p>
    <input placeholder="è¾“å…¥è¦ç¼©çŸ­çš„ç½‘å€..." x-model="url" x-ref="url" />
    <details>
      <summary>è‡ªå®šä¹‰è®¾ç½®</summary>
      <div>
        <input placeholder="slug" x-model="slug" />
        <small>Slug é»˜è®¤æ˜¯éšæœºç”Ÿæˆçš„çŸ­ idã€‚</small>
      </div>
    </details>
    <button :class="{ loading }" :disabled="loading || isValidated()" @click="submit($refs, $nextTick)">
      ç”Ÿæˆ
    </button>
  </main>
  <footer>
    <!-- å·¦å³å±…ä¸­ï¼Œé•¿å®½å›ºå®š100px -->
    <img src="asset/img/qrcode_for_gh_9b579c858a6a_258 (1).jpg" alt="çŸ­é“¾ç”Ÿæˆå·¥å…·å›¾æ ‡" class="qrcode"/>
    <div class="footer">
      <span>Copyright Â© 2021-present </span>
      <a class="footer-link" target="_blank" href="https://yoyou.org">yoyou.org</a>
      <span> All rights reserved.</span>
    </div>
    <div class="stat-container">
      <script type="module" src="/src/main.tsx"></script>
      <div class="stat-item">
        <span>ğŸ‘€</span>
        <span>æœ¬ç«™æ€»è®¿é—®é‡</span>
        <span id="busuanzi_value_site_pv" class="stat-value"></span>
        <span>æ¬¡</span>
      </div>

      <div class="stat-item">
        <span>ğŸ‘¥</span>
        <span>æœ¬ç«™æ€»è®¿å®¢æ•°</span>
        <span id="busuanzi_value_site_uv" class="stat-value"></span>
        <span>äºº</span>
      </div>
    </div>
  </footer>
  <script src="asset/js/alpine.js"></script>
  <script>
    const app = {
      url: "",
      slug: "",
      alert: null,
      loading: false,
      isValidated() {
        return !/^https?:\/\/.{3,}/.test(this.url);
      },
      submit($refs, $nextTick) {
        if (!this.url) {
          this.alert = { type: "error", message: "ç¼ºå°‘å¿…éœ€çš„å‚æ•°ï¼šurlã€‚" };
          return;
        }

        if (this.isValidated()) {
          this.alert = { type: "error", message: "éæ³•æ ¼å¼ï¼šurlã€‚" };
          return;
        }

        this.alert = null;
        this.loading = true;

        const body = { url: this.url };
        if (this.slug) body.slug = this.slug;

        fetch("/create", {
          method: "post",
          headers: { "content-type": "application/json" },
          body: JSON.stringify(body),
        })
          .then((res) => res.json())
          .then((res) => {
            this.loading = false;
            if (res.message) {
              this.alert = { type: "error", message: res.message };
              return;
            }

            this.url = res.link;

            $nextTick(() => {
              $refs.url.select();
              this.alert = {
                type: "success",
                message: `é“¾æ¥ ${document.execCommand("Copy") ? "å¤åˆ¶" : "ç”Ÿæˆ"
                  } `,
              };
            });
          })
          .catch((e) => {
            this.alert = { type: "error", message: e.message };
            this.loading = false;
          });
      },
    };
  </script>
</body>

</html>